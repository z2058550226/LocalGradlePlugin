apply plugin: 'groovy'
apply plugin: 'java'

dependencies {
    // gradle sdk
    implementation gradleApi()
    // groovy sdk
    implementation localGroovy()
    implementation 'com.android.tools.build:gradle:3.5.3'
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.3.61"
    implementation 'org.javassist:javassist:3.20.0-GA'
}

repositories {
    jcenter()
    google()
}

apply plugin: TestPlugin

suika {
    address {
        province 'HeiLongJiang'
        city 'JianSanJiang'
    }

    myName 'JinYan'
}

class Address {
    String province = null
    String city = null
}

class SuikaExtension {
    String myName = null;
}

class TestPlugin implements Plugin<Project> {

    @Override
    void apply(Project target) {
        target.extensions.create('suika', SuikaExtension)
        target.extensions.create('address', Address)

        target.task('readExtension') {
            doLast {
                def address = target['address']

                println target['suika'].myName
                println address.province + "  " + address.city
            }
        }
    }
}